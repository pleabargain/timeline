document.addEventListener('DOMContentLoaded', function() {
    const data = {
        "timelines": {

        "pizzaPartyStory": [
            {
                "time": "Twelve weeks ago",
                "event": "Idea conception",
                "context": "Susan, the office manager, had thought of the idea for a pizza party as a team-building exercise.",
                "actor": "Office Manager, Susan Clark",
                "tense": "Past Perfect"
            },
            {
                "time": "Ten weeks ago",
                "event": "Discussion with the team",
                "context": "She discussed the idea with her team, and they loved it.",
                "actor": "Team Member, John Doe",
                "tense": "Past Simple"
            },
            {
                "time": "Eight weeks ago",
                "event": "Planning phase",
                "context": "Susan was researching different pizza places and party ideas.",
                "actor": "Susan Clark",
                "tense": "Past Continuous"
            },
            {
                "time": "recently",
                "event": "Budget approval",
                "context": "The management has approved the budget for the pizza party.",
                "actor": "CEO, Emily White",
                "tense": "Present Perfect"
            },
            {
                "time": "now",
                "event": "Finalizing the pizza order",
                "context": "Susan is finalizing the pizza order, ensuring there are options for everyone.",
                "actor": "Susan Clark",
                "tense": "Present Continuous"
            },
            {
                "time": "now",
                "event": "Sending out invitations",
                "context": "Susan sends out digital invitations to all her co-workers for the pizza party.",
                "actor": "Susan Clark",
                "tense": "Present Simple"
            },
            {
                "time": "One week ago",
                "event": "Confirmation of RSVPs",
                "context": "She will confirm the final headcount based on the RSVPs received.",
                "actor": "Susan Clark",
                "tense": "Future Simple"
            },
            {
                "time": "Five days ago",
                "event": "Arranging party games",
                "context": "Susan had been arranging fun party games to play during the event.",
                "actor": "Susan Clark",
                "tense": "Past Perfect Continuous"
            },
            {
                "time": "Three days ago",
                "event": "Finalizing the playlist",
                "context": "She had been creating a playlist for the party, considering everyone's music preferences.",
                "actor": "Team Member, Lisa Green",
                "tense": "Past Perfect Continuous"
            },
            {
                "time": "now",
                "event": "Decoration planning",
                "context": "Susan is currently picking up decorations for the party.",
                "actor": "Susan Clark",
                "tense": "Present Continuous"
            },
            {
                "time": "later Today",
                "event": "Party setup",
                "context": "She will be setting up the party area with decorations and arranging tables.",
                "actor": "Susan Clark",
                "tense": "Future Continuous"
            },
            {
                "time": "Tomorrow",
                "event": "Pizza party day",
                "context": "The team will have enjoyed a fun and successful pizza party at the office.",
                "actor": "Entire office team",
                "tense": "Future Perfect"
            }
        ],
        
        "contractNegotiationStory": [
            {
                "time": "Three months ago",
                "event": "Initial client meeting",
                "context": "Laura, a skilled negotiator, had first met with the challenging client to discuss potential terms.",
                "actor": "Negotiator, Laura Smith",
                "tense": "Past Perfect"
            },
            {
                "time": "Two months ago",
                "event": "Proposal submission",
                "context": "She submitted a detailed contract proposal to the client.",
                "actor": "Laura Smith",
                "tense": "Past Simple"
            },
            {
                "time": "Six weeks ago",
                "event": "Negotiation phase",
                "context": "Laura was frequently negotiating with the client, trying to reach an agreement.",
                "actor": "Laura Smith",
                "tense": "Past Continuous"
            },
            {
                "time": "recently",
                "event": "Client's initial approval",
                "context": "The client has recently given initial approval to the contract's framework.",
                "actor": "Difficult Client, Mr. Johnson",
                "tense": "Present Perfect"
            },
            {
                "time": "now",
                "event": "Reviewing contract details",
                "context": "Laura is currently reviewing the contract details to ensure accuracy and completeness.",
                "actor": "Laura Smith",
                "tense": "Present Continuous"
            },
            {
                "time": "now",
                "event": "Sending revised contract",
                "context": "She sends the revised contract to the client for final approval.",
                "actor": "Laura Smith",
                "tense": "Present Simple"
            },
            {
                "time": "Next week",
                "event": "Expected finalization",
                "context": "She will follow up with the client for the final contract signature.",
                "actor": "Laura Smith",
                "tense": "Future Simple"
            },
            {
                "time": "Five weeks ago",
                "event": "Ongoing discussions",
                "context": "Laura had been in ongoing discussions with the client, addressing their concerns.",
                "actor": "Laura Smith",
                "tense": "Past Perfect Continuous"
            },
            {
                "time": "Four weeks ago",
                "event": "Adjusting contract terms",
                "context": "She had been adjusting the contract terms to better align with the client's expectations.",
                "actor": "Laura Smith",
                "tense": "Past Perfect Continuous"
            },
            {
                "time": "now",
                "event": "Finalizing logistics",
                "context": "Laura is currently finalizing the logistics for the contract signing ceremony.",
                "actor": "Laura Smith",
                "tense": "Present Continuous"
            },
            {
                "time": "Tomorrow",
                "event": "Preparing for meeting",
                "context": "She will be preparing for a crucial meeting with the client to discuss the final contract.",
                "actor": "Laura Smith",
                "tense": "Future Continuous"
            },
            {
                "time": "End of the month",
                "event": "Contract completion",
                "context": "Laura and the client will have successfully completed the contract negotiations by the end of the month.",
                "actor": "Laura Smith and Mr. Johnson",
                "tense": "Future Perfect"
            }
        ],
        

            "mystery map": [
                {
                    "time": "tomorrow",
                    "event": "The discovery of a mysterious map",
                    "context": "In an old library, a hidden map is found behind ancient books",
                    "actor": "Librarian Mr. Adams"
                },
                {
                    "time": "day after tomorrow",
                    "event": "Deciphering the map",
                    "context": "Mr. Adams and local historian Ms. Johnson work together to decipher the map's secrets",
                    "actor": "Historian Ms. Johnson"
                },
                {
                    "time": "in three days",
                    "event": "The journey begins",
                    "context": "A team sets out following the map, leading them into dense woods",
                    "actor": "Explorer Dr. Lee"
                },
                {
                    "time": "in four days",
                    "event": "Discovery of an ancient ruin",
                    "context": "The team discovers hidden ruins, suggesting an ancient civilization",
                    "actor": "Archaeologist Prof. Smith"
                },
                {
                    "time": "in five days",
                    "event": "Unveiling the mystery",
                    "context": "A significant historical artifact is found, rewriting history",
                    "actor": "Museum Director Dr. Rivera"
                }
            ],

            "familyStory": [
                {
                    "time": "20 years ago",
                    "event": "The birth of twins",
                    "context": "In a small town, a family welcomes twin siblings, a boy and a girl, into the world.",
                    "actor": "Mother, Mrs. Thompson"
                },
                {
                    "time": "15 years ago",
                    "event": "The family moves to a new city",
                    "context": "The Thompson family relocates to a bigger city for better opportunities.",
                    "actor": "Father, Mr. Thompson"
                },
                {
                    "time": "10 years ago",
                    "event": "Twins' first day at a new school",
                    "context": "The twins start their first day in a new school, facing the challenges of making new friends.",
                    "actor": "Twins, Sarah and Sam Thompson"
                },
                {
                    "time": "5 years ago",
                    "event": "High school graduation",
                    "context": "The twins graduate from high school with honors, marking a milestone in their academic journey.",
                    "actor": "Twins, Sarah and Sam Thompson"
                },
                {
                    "time": "next week",
                    "event": "Family reunion",
                    "context": "The Thompson family plans a grand reunion to celebrate 20 years of growth, challenges, and success.",
                    "actor": "The entire Thompson family"
                }
            ],
            "projectStory": [
                {
                    "time": "two weeks ago",
                    "event": "Initial project briefing",
                    "context": "The team at the advertising company receives a brief for a major campaign from a high-profile client.",
                    "actor": "Project Manager, Alex Johnson"
                },
                {
                    "time": "a week ago",
                    "event": "Creative brainstorming session",
                    "context": "The creative team holds a brainstorming session to come up with innovative ideas for the campaign.",
                    "actor": "Creative Director, Lisa Chang"
                },
                {
                    "time": "today",
                    "event": "Client presentation",
                    "context": "The team presents their campaign ideas and strategies to the client for approval.",
                    "actor": "Account Executive, Mark Bennett"
                },
                {
                    "time": "tomorrow",
                    "event": "Production kickoff",
                    "context": "Following client approval, the team begins the production phase of the campaign.",
                    "actor": "Production Manager, Emily Garcia"
                },
                {
                    "time": "next week",
                    "event": "Campaign launch",
                    "context": "The advertising campaign is launched, showcasing the team's hard work and creativity.",
                    "actor": "Entire advertising team"
                }
            ],
            "holidayStory": [
                {
                    "time": "Six months ago",
                    "event": "Deciding the destination",
                    "context": "The Johnson family had been planning to spend Christmas in a cozy mountain cabin.",
                    "actor": "Family Patriarch, John Johnson",
                    "tense": "Past Perfect"
                },
                {
                    "time": "Four months ago",
                    "event": "Booking the cabin",
                    "context": "They booked a beautiful cabin after finding a great deal online.",
                    "actor": "Mother, Mary Johnson",
                    "tense": "Past Simple"
                },
                {
                    "time": "Two months ago",
                    "event": "Planning activities",
                    "context": "They were planning various activities like skiing and snowboarding for their trip.",
                    "actor": "Teenage Son, David Johnson",
                    "tense": "Past Continuous"
                },
                {
                    "time": "One month ago",
                    "event": "Shopping for winter gear",
                    "context": "They have shopped for winter gear, ensuring everyone is prepared for the cold.",
                    "actor": "Daughter, Emma Johnson",
                    "tense": "Present Perfect"
                },
                {
                    "time": "Three weeks ago",
                    "event": "Finalizing the itinerary",
                    "context": "They are finalizing their holiday itinerary, including a special Christmas Eve dinner.",
                    "actor": "Grandmother, Susan Johnson",
                    "tense": "Present Continuous"
                },
                {
                    "time": "Two weeks ago",
                    "event": "Sending out holiday cards",
                    "context": "They send out holiday cards to friends and family, sharing their upcoming vacation plans.",
                    "actor": "Mary Johnson",
                    "tense": "Present Simple"
                },
                {
                    "time": "One week ago",
                    "event": "Checking the weather forecast",
                    "context": "They will be checking the weather forecast to ensure safe travel conditions.",
                    "actor": "John Johnson",
                    "tense": "Future Simple"
                },
                {
                    "time": "Three days ago",
                    "event": "Packing for the trip",
                    "context": "They were packing their bags, excited about the upcoming holiday.",
                    "actor": "Entire Johnson Family",
                    "tense": "Past Perfect Continuous"
                },
                {
                    "time": "Yesterday",
                    "event": "Decorating the house",
                    "context": "They had been decorating their house before leaving, to return to a festive home.",
                    "actor": "Emma and David Johnson",
                    "tense": "Past Perfect Continuous"
                },
                {
                    "time": "Today",
                    "event": "Heading to the cabin",
                    "context": "They are currently on their way to the mountain cabin, looking forward to a memorable Christmas.",
                    "actor": "Entire Johnson Family",
                    "tense": "Present Continuous"
                },
                {
                    "time": "Tomorrow",
                    "event": "Arriving at the destination",
                    "context": "They will be arriving at the cabin, ready to start their holiday celebrations.",
                    "actor": "John Johnson",
                    "tense": "Future Continuous"
                },
                {
                    "time": "Next week",
                    "event": "Celebrating Christmas",
                    "context": "They will have celebrated a joyous and memorable Christmas in the mountains.",
                    "actor": "Mary Johnson",
                    "tense": "Future Perfect"
                }
            ],
            
       
        }
    };
    const timelineSelector = document.getElementById('timelineSelector');
    const timelineContainer = document.getElementById('timeline');

    // Check if 'data.timelines' exists and is not null
    if (data && data.timelines) {
        // Get sorted timeline keys
        const sortedTimelineKeys = Object.keys(data.timelines).sort();

        // Populate the dropdown with sorted timelines
        sortedTimelineKeys.forEach(timeline => {
            let option = document.createElement('option');
            option.value = timeline;
            option.textContent = timeline;
            timelineSelector.appendChild(option);
        });

// Function to render a selected timeline
function renderTimeline(timelineKey) {
    const timelineData = data.timelines[timelineKey];
    timelineContainer.innerHTML = ''; // Clear existing timeline

    timelineData.forEach((item, index) => {
        const element = document.createElement('div');
        element.classList.add('timeline-item');
        element.innerHTML = `
            <div><strong>Time:</strong> ${item.time}</div>
            <div><strong>Event:</strong> ${item.event}</div>
            <div><strong>Context:</strong> ${item.context}</div>
            <div><strong>Actor:</strong> ${item.actor}</div>
            ${item.tense ? `<div><strong>Tense:</strong> ${item.tense}</div>` : ''}
        `;

        // Add connector except for the last item
        if (index < timelineData.length - 1) {
            const connector = document.createElement('div');
            connector.classList.add('connector');
            element.appendChild(connector);
        }

        timelineContainer.appendChild(element);
    });
}

        // Event listener for dropdown change
        timelineSelector.addEventListener('change', function() {
            renderTimeline(this.value);
        });

        // Initially render the first timeline
        if (sortedTimelineKeys.length > 0) {
            renderTimeline(sortedTimelineKeys[0]);
        }
    } else {
        console.error("Data object or its 'timelines' property is not defined.");
    }
});